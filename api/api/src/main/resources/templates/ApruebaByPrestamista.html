<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<!-- Fin de Bootstrap -->
<title>Listado de Solicitudes de Prestamo</title>
</head>
<body>
	<div th:insert="~{plantilla/UITemplate.html::cabecera}"></div>
	</br>
	</br>
<!-- Contenido centrado y con margens con container -->
<!-- INICIO EL CONTAINER -->
<div class="container">
<!-- Inicio de FORMULARIO -->

<form class="form-inline">
	
	<!--Contenedor 10 + 1 del boton para que este a costado-->
		<div class="row align-items-center" style="width: 100%;" >
				<div class="col-md-10">
			
		<!-- Banco combobox -->
		<div class="row align-items-center">
			<div class="col-md-3">
		  <div class="form-group mb-0">
		    <label for="exampleInputNombre1">Prestamista: </label>
		  </div>
		  </div>
		  
  		<div class="col-md-9">
		  <div class="form-group">
		    <!-- Para despegable con bootstrap con SELECT y asignamos id =idSexo -->
			  <select class="form-control" id="idPrestamista" name="prestamista">
			  <!-- donde para Seleccione su value es vacio(espacio) es empty y agarra para la validación, y para los otros si tienen value-->
		      <option value=" ">[Seleccione Prestamista...]</option>
		      <option value="Femenino">Dixon</option>
		       <option value="Femenino">Steven</option>
		      <option value="Masculino">Moneyman</option>
		      </select>
		  </div>
		  </div>
		</div>
		</br>
	<!-- FECHA DESDE del combobox -->
		 <div class="row align-items-center">
			<div class="col-md-2">
		  <div class="form-group mb-0">
		    <label for="exampleInputNombre1">Fecha Solicitud (Desde): </label>
		  </div>
		  </div>
		  
  		<div class="col-md-4">
		  <div class="form-group">
		    <input type="text" class="form-control" id="idCuentaBloqueada" name="nombre">
		  </div>
		  </div>
		  <!-- FECHA HASTA del combobox -->
		  

			<div class="col-md-2">
		  <div class="form-group mb-0">
		    <label for="exampleInputNombre1">Fecha Solicitud (Hasta): </label>
		  </div>
		  </div>
		  
  		<div class="col-md-4">
		  <div class="form-group">
		    <input type="text" class="form-control" id="idCuentaBloqueada" name="nombre">
		  </div>
		  </div>
		  
		</div>
		  
		  
	
		  
		  
		  
		
	 	</div>
	 	<!--BOTON ROJO > -->
		 <div class="col-md-2">
		  <div class="form-group">
			
		   <button  type="button" class="btn btn-success w-100" style="margin-left: 120px;">Filtrar</button>
		  </div>
		  </div>
		</div>	<!--FIN Contenedor 10 + 1 del boton para que este a costado-->
</form>
<!-- FIN DEL FORMULARIO -->

<!-- INICIO DE DIV PARA SEPARACIÓN MT-4 -->
 <!-- ESPACIADO  class mt-4 es margen superior de 4 para toda la tabla -->
 <div class="mt-4">
  <!-- INICIO DE LA TABLA y asignamos id tableDocentes -->
  <table id="tableDocentes" class="table table-striped table-bordered" style="width:100%">
  		<!-- thead seria para el nombre de las columnas o encabezado -->
        <thead>
            <tr>
            <!-- Aqui se ponen el nombre de los encabezados de la tabla -->
                <th>Código</th>
                <th>Nombres</th>
                <th>Paterno</th>
                <th>Materno</th>
                <th>Sexo</th>
                <th>Hijos</th>
                <th>Sueldo</th>
                <!-- Agregamos nuevo th Condicion para la foranea -->
                <th>Condición</th>
            </tr>
        </thead>
        <!-- Dentro del cuerpo creamos tr que es una fila y td es celda dentro de la fila -->
        <tbody>
        <!-- SI USAMOS JSTL, LA PÁGINA VA A REFRESCAR O ACTUALIZAR -->
            <tr>
            <!-- Aca creamos las celdas que tendran los registros, si hay 8 encabezados arriba de la tabla
            abra 8 td aca -->
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
         </tbody>
         <!--FIN de tbody  --> 
    </table>
  <!-- FIN DE LA TABLA -->
  </div>
<!-- FIN DE DIV PARA SEPARACIÓN MT-4  -->
</div>
<!-- FIN EL CONTAINER -->

<!-- Importamos más cosas que se necesitaran hasta mas campos para bootstrap esto sirve para paginacion y search y demás de la tabla junto a lo que esta en script -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<!-- Comentamos un JQUERY debido a que causa problemas para el GSON O JSON -->
<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.2/js/dataTables.bootstrap4.min.js"></script>
<!-- FIN DE IMPORTAMOS MÁS COSAS -->
<!-- Abrimos bloque Script para usar el GSON -->
<script>
//PARA el boton Consultar agregamos evento click por medio del id btn-consultar
$(document).on("click","#btn-consultar",function(){
	//Leer el valor seleccionado del select "idSexo"
	//donde la variable vSexo de tipo var obtiene lo que se ha marcado en el combo a partir de
	//los options y por medio del value que es lo vale más para las selecciones
	//SE LEE EL VALUE de los options
	var vSexo;
	//vSexo tiene si es vacio o Masculino o Femenino
	vSexo=$("#idSexo").val();
	//Limpiar filas de la tabla "tableDocentes" por cada consulta q se hace
	//limpiamos el tbody que es el cuerpo del html creado arriba
	$("#tableDocentes tbody").empty();
	//
	//Invocar al ServletDocenteSexoJSON
	//funcion $.getJSON en JQUERY que permite invocar a un Servlet y retornar el JSON
	//donde el primer parametro es el nombre del Servlet que se quiere llamar y ejecutara el service
	//el segundo parametro iria los parametros del metodo listarDocentesPorSexo(vSexo) del
	//ServletDocenteSexoJSON si es que tuviera
	//el tercer parametro hace referencia en el ServletDocenteSexoJSON
	//response.setContentType("application/json;charset=UTF-8"); donde response tiene el GSON
	
	//Donde en el segundo parametro ponemos sexo haciendo referencia al nombre en el ServletDocenteSexoJSON
	//en la parte de request.getParameter("sexo"), donde lo que esta dentro de (" ") es lo que se pone
	//primero y luego del : ponemos la variable creada arriba de tipo var llamada vSexo el cual
	//almacena lo seleccionado por el combo
	//Leyendose parametro sexo con el valor de vSexo que almacena lo seleccionado por el combo
	//asi mandamos el parametro sexo al ServletDocenteSexoJSON
	//y dentro de este servlet lo recupera asi -> vSexo=request.getParameter("sexo");
	$.getJSON("ServletDocenteSexoJSON",{sexo:vSexo},function(response){
		//Para comprobar q todo este OK
		//ponemos console.log(response)  y ejecutamos y en la consola de navegdor vemos si sale error
		
		//bucle para imprimir lo que esta almacenado en JSON
		//bucle da vueltas sobre response para traer la info 
		//donde index es posición valor 0 de la primera fila
		// y asi sucesivamente imprime los demás eso significa index
		//donde item almacena el valor de cada fila del index 
		$.each(response,function(index,item){
			//Generar filas en la tabla , donde la tabla se llama por su identificador id
			//id="tableDocentes", donde tr es fila y td celda
			// y con item que almacena los valores, para imprimir llamamos asi
			//item.codigo, item.codigoCondicion y asi sucesivamente, donde lo que esta despues
			//del . del item van los campos de la entidad Docente creada en net.colegio.entidad
			$("#tableDocentes").append("<tr><td>"+item.codigo+"</td><td>"+item.nombres+"</td><td>"+
					item.paterno+"</td><td>"+item.materno+"</td><td>"+item.sexo+"</td><td>"+
					item.hijos+"</td><td>"+item.sueldo+"</td><td>"+item.nombreCondicion+"</td></tr>");
		})
		
		
		
	})
	
})

</script>
<!-- FIN DE Abrimos bloque Script para usar el GSON -->
</body>
</html>