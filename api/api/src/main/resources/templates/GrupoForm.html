<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Registrar Grupo</title>
</head>

<body>
	
	<!-- <header th:replace="layout/layout :: header"></header> -->
	
	<br>
	
	<div class="container">
	   <div class="row">
	      <div class="col-lg-6 col-md-6 col-sm-6 container justify-content-center card">
	           <!-- <h1 class="text-center" th:text="${titulo}"></h1> -->
               <h1 class="text-center" th:text="${title}"></h1>
	           <div class="card-body">
	              <form 
                    th:object="${grupo}" 
                    method="post" 
                    th:action="${formType == 'post' ? '/grupo/registrar' : '/grupo/actualizar'}"
                    th:if="${formType != 'new'}"
                    >

                    <!--OJO  -->
                    <input type="hidden" th:field="*{idGrupo}" th:value="${grupo.idGrupo}"/>
                    
                    <!--OJO-->
                    <div class="form-group">
                        <label>Nombre de Grupo : </label>
                        <input type="text" th:field="*{descripcion}" class="form-control" th:errorclass="'form-control alert-danger"/>
                        <!-- <small class="form-text text-danger" th:if="${#fields.hasErrors('grupo.descripcion')}" th:errors="*{grupo.descripcion}"></small> -->
                    </div>
                    
                    <div class="box-footer"> 
                        <input type="submit" value="Guardar" class="btn btn-primary">
                    </div>

	              </form>

                  <form 
                    th:object="${grupoPersonaDto}" 
                    method="post" 
                    th:action="@{/grupo/newMember}"
                    th:if="${formType == 'new'}"
                    >
                    <input type="text" th:field="*{idGrupo}">
                    <div class="form-group">
                        <label>Nombre de Grupo : </label>
                        <input type="text" th:field="*{descripcion}" disabled/>
                    </div>

                    <div class="form-group">
                        <label>Nuevo miembro </label>
                        <div class="input-group">
                            <select name="cboPersonas" id="idPersona" class="form-select form-control" th:field="*{idPersona}">
                                <option value="-1">[Seleccione Miembro]</option>
                                <option 
                                    th:each="item : ${cboPersonas}"
                                    th:value="${item.idPersona}"
						            th:utext="${item.nombres + ' ' + item.apellidos}"></option>
                            </select>
                        </div>
                    </div>

                    <div class="box-footer"> 
                        <input type="submit" value="Agregar miembro" class="btn btn-primary">
                    </div>

                  </form>
	           </div>
	      </div>
	   </div>
	</div>
	
	<footer>
        
    </footer>
		
</body>
</html>